
cmake_minimum_required(VERSION 3.6)

project(GDExample)

if(NOT CMAKE_BUILD_TYPE)
	set(CMAKE_BUILD_TYPE "Debug")
endif()

if(CMAKE_SYSTEM_NAME STREQUAL Android)
	set(LIB_SUFFIX_DEBUG "android.${ANDROID_ABI}")
	set(LIB_SUFFIX_RELEASE "android.opt.${ANDROID_ABI}")
elseif(CMAKE_SYSTEM_NAME STREQUAL Emscripten)
	set(LIB_SUFFIX_DEBUG "javascript")
	set(LIB_SUFFIX_RELEASE "javascript.opt")
else()
	if(WIN32)
		set(LIB_SUFFIX_DEBUG "windows")
		set(LIB_SUFFIX_RELEASE "windows.opt")
	elseif(UNIX OR CMAKE_SYSTEM_NAME STREQUAL "Linux")
		set(LIB_SUFFIX_DEBUG "x11")
		set(LIB_SUFFIX_RELEASE "x11.opt")
	endif()

	if(CMAKE_SIZEOF_VOID_P EQUAL 8)
		set(LIB_SUFFIX_DEBUG "${LIB_SUFFIX_DEBUG}.64")
		set(LIB_SUFFIX_RELEASE "${LIB_SUFFIX_RELEASE}.64")
	else()
		set(LIB_SUFFIX_DEBUG "${LIB_SUFFIX_DEBUG}.32")
		set(LIB_SUFFIX_RELEASE "${LIB_SUFFIX_RELEASE}.32")
	endif()
endif()

if(MINGW)
	set(LIB_PREFIX "lib")
	set(LIB_SUFFIX ".a")
else()
	if(WIN32)
		if (MSVC)
			set(LIB_PREFIX "")
		else()
			set(LIB_PREFIX "lib")
		endif()
	else()
		set(LIB_PREFIX "lib")
	endif()
	set(LIB_SUFFIX "${CMAKE_STATIC_LIBRARY_SUFFIX}")
endif()

set(LIB )
if("${CMAKE_BUILD_TYPE}" STREQUAL "Release")
	set(LIB "${CMAKE_CURRENT_LIST_DIR}/godot-cpp-cmake/lib/${LIB_PREFIX}godot-cpp.${LIB_SUFFIX_RELEASE}${LIB_SUFFIX}")
else()
	set(LIB "${CMAKE_CURRENT_LIST_DIR}/godot-cpp-cmake/lib/${LIB_PREFIX}godot-cpp.${LIB_SUFFIX_DEBUG}${LIB_SUFFIX}")
endif()

if(CMAKE_SYSTEM_NAME STREQUAL Android AND NOT EXISTS "${LIB}")
	include("${CMAKE_CURRENT_LIST_DIR}/godot-cpp-cmake/CMakeLists.txt")
endif()

include("${CMAKE_CURRENT_LIST_DIR}/src/CMakeLists.txt")

